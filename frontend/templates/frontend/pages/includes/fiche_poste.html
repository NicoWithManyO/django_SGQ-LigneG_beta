<!-- Block Fiche de Poste -->
<div x-data="fichePoste()">
    <!-- Ligne 1: Opérateur avec bouton + -->
    <div>
        <label class="sgq-label">Opérateur</label>
        <div class="d-flex gap-2">
            <select class="form-select form-select-sm sgq-select sgq-select-sm" 
                    x-model="operatorId" 
                    @change="saveToSession()">
                <option value="">-- Choisir un opérateur --</option>
                {% for operator in operators %}
                <option value="{{ operator.id }}" 
                        {% if current_operator and current_operator.id == operator.id %}selected{% endif %}>
                    {{ operator.first_name }} {{ operator.last_name|upper }}
                </option>
                {% endfor %}
            </select>
            <button type="button"
                    class="btn btn-outline-secondary btn-sm d-flex align-items-center justify-content-center" 
                    title="Ajouter un opérateur" 
                    style="width: 36px; padding: 0;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg>
            </button>
        </div>
        <!-- ID Poste sous l'opérateur -->
        <div class="small text-muted">
            ID Poste : <span x-text="shiftId"></span>
        </div>
    </div>
    
    <!-- Ligne 2: Date et Vacation -->
    <div class="row g-2">
        <div class="col-6">
            <label class="sgq-label">Date</label>
            <div class="input-group input-group-sm">
                <input type="date" 
                       class="form-control form-control-sm sgq-input" 
                       x-model="shiftDate">
                <button class="btn btn-outline-secondary d-flex align-items-center justify-content-center" 
                        type="button"
                        @click="setToday()"
                        title="Aujourd'hui">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="col-6">
            <label class="sgq-label">Vacation</label>
            <select class="form-select form-select-sm sgq-select sgq-select-sm" 
                    x-model="vacation"
                    @change="updateTimes()">
                <option value="">-- Vacation --</option>
                <option value="MATIN">Matin</option>
                <option value="APRES_MIDI">Après-midi</option>
                <option value="NUIT">Nuit</option>
                <option value="JOURNEE">Journée</option>
            </select>
        </div>
    </div>
    
    <!-- Ligne 3: Prise de poste et Fin de poste -->
    <div class="row g-2">
        <div class="col-6">
            <label class="sgq-label">Prise de poste</label>
            <input type="time" 
                   class="form-control form-control-sm sgq-input" 
                   x-model="startTime">
        </div>
        <div class="col-6">
            <label class="sgq-label">Fin de poste</label>
            <input type="time" 
                   class="form-control form-control-sm sgq-input" 
                   x-model="endTime">
        </div>
    </div>
    
    
    <!-- Zone de notes/commentaires -->
    <div class="mt-2">
        <textarea class="form-control form-control-sm" 
                  rows="3" 
                  placeholder="Notes ou commentaires..."
                  x-model="notes"
                  style="background-color: #F8F9FA; border: 1px solid #DEE2E6;"></textarea>
    </div>
</div>